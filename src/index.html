<html>
    <head>

        <!-- <script type="text/javascript" src="/src/assets/prueba.js"></script> -->

        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cabin:700">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        <style>
        /* chrome scrollbars */
        textarea::-webkit-scrollbar 
        {
            width: 16px;
            background-color: #444;
            cursor: pointer;
        }
        textarea::-webkit-scrollbar-track 
        {
            background-color: #333;    
            cursor: pointer;
        }
        textarea::-webkit-scrollbar-corner
        {
          background-color: #484;
          -webkit-box-shadow: inset 0 0 6px rgba(255,255,255,0.3);
        }
        textarea::-webkit-scrollbar-thumb 
        {
          background-color: #444;
          /*outline: 1px solid #666;*/
          -webkit-box-shadow: inset 0 0 6px rgba(255,255,255,0.3);
          cursor: pointer;
        }
        </style>
</head>
<body bgcolor="#BAF4F6">
     

<nav class="navbar navbar-light navbar-expand-md navbar-fixed-top navigation-clean-button">
        <div class="container">
            <div><a class="navbar-brand" href="#"><span>Practica 2 Compiladores 2 </span> </a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button></div>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="navbar-nav nav-right">
                    <li class="nav-item"><a class="nav-link active" href="index.html" style="color: var(--bs-white);">home </a></li>
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#" style="color: var(--bs-white);">Descargas </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" id="exportar3D" name="exportar3D" style="color: var(--bs-white);" href="services.html">Codigo 3D.cpp</a>
                            <a class="dropdown-item" id="exportarOptimizado" name="exportarOptimizado" style="color: var(--bs-white);" href="#">Codigo Optimizado.cpp</a>
                            <a class="dropdown-item" id="exportarAssembler" name="exportarAssembler" style="color: var(--bs-white);" href="#">Codigo Assembler.asm</a>
                        </div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="about.html" style="color: var(--bs-white);">about </a></li>


                </ul>
                <p class="ms-auto navbar-text actions"><a class="login" href="#">Log In</a> <a class="btn btn-light action-button" role="button" href="signup.html">Sign Up</a></p>
            </div>
        </div>
    </nav>

<div ALIGN="CENTER" ><h2 ALIGN="CENTER" >ANALIZADOR DE GRAMATICA </h2></div>

<script>
    
//function()
//
// desc: demonstrates textarea line numbers using canvas paint 
// auth: james
//
var TextAreaLineNumbersWithCanvas = function()
{
var div = document.createElement('div');
var cssTable = 'padding:0px 0px 0px 0px!important; margin:0px 0px 0px 0px!important; font-size:1px;line-height:0px; width:auto;';
      var cssTd1 = 'border:1px #345 solid; border-right:0px; vertical-align:top; width:1px;';
      var cssTd2 = 'border:1px #345 solid; border-left:0px; vertical-align:top;';
      var cssButton = 'width:120px; height:40px; border:1px solid #333 !important; border-bottom-color: #484!important; color:#ffe; background-color:#222;';
      var cssCanvas = 'border:0px; background-color:#1c1c20; margin-top:0px; padding-top:0px;';
      var cssTextArea =  'width:auto;'
                       + 'height:350;'
                       + 'font-size:14px;'
                       + 'font-family:monospace;'
                       + 'line-height:15px;'
                       + 'font-weight:500;'
                       + 'margin: 0px 0px 0px 0px;'
                       + 'padding: 0px 0px 0px 0px;'
                       + 'resize: both;'
                       + 'color:#000000;'
                       + 'border:0px;'
                       + 'background-color:#FFFF;'
                       + 'white-space:nowrap; overflow:auto;'                    
                       // supported only in opera 12.x
                       + 'scrollbar-arrow-color: #ee8;'
                       + 'scrollbar-base-color: #444;'
                       + 'scrollbar-track-color: #666;'
                       + 'scrollbar-face-color: #444;'
                       + 'scrollbar-3dlight-color: #444;' /* outer light */
                       + 'scrollbar-highlight-color: #666;' /* inner light */
                       + 'scrollbar-darkshadow-color: #444;' /* outer dark */
                       + 'scrollbar-shadow-color: #222;' /* inner dark */
                       ;

      // LAYOUT (table 2 panels)
      var table = document.createElement('table');
          table.setAttribute('cellspacing','0');
          table.setAttribute('cellpadding','0');
          table.setAttribute('style', cssTable);
      var tr = document.createElement('tr');
      var td1 = document.createElement('td');
          td1.setAttribute('style', cssTd1);
      var td2 = document.createElement('td');
          td2.setAttribute('style', cssTd2);

          
          tr.appendChild(td1);
          tr.appendChild(td2);
          table.appendChild(tr);

      // TEXTAREA
      var ta = this.evalnode = document.createElement('textarea');
          ta.setAttribute('cols','215');
          ta.setAttribute('id','area');
          ta.setAttribute('name','area');
          ta.setAttribute('style', cssTextArea);
          //ta.value = this.S.get('eval') || '';  // get previous executed value ;)

      // TEXTAREA NUMBERS (Canvas)
      var canvas = document.createElement('canvas');
          canvas.width = 80;    // must not set width & height in css !!!
          canvas.height = 500;  // must not set width & height in css !!!
          canvas.setAttribute('style', cssCanvas);
          ta.canvasLines = canvas;
          td1.appendChild(canvas);
          td2.appendChild(ta);
          div.appendChild(table);

      // PAINT LINE NUMBERS
      ta.paintLineNumbers = function()
      {
        try
        {
        var canvas = this.canvasLines;
        if (canvas.height != this.clientHeight) canvas.height = this.clientHeight; // on resize
        var ctx = canvas.getContext("2d");
        ctx.fillStyle = "#303030";
        ctx.fillRect(0, 0, 42, this.scrollHeight+1);
        ctx.fillStyle = "#808080";
        ctx.font = "14px monospace"; // NOTICE: must match TextArea font-size(12px) and lineheight(15) !!!
        var startIndex = Math.floor(this.scrollTop / 15,0);
        var endIndex = startIndex + Math.ceil(this.clientHeight / 15,0);
        for (var i = startIndex; i < endIndex; i++)
        {
          var ph = 10 - this.scrollTop + (i*15);
          var text = ''+(1+i);  // line number
          ctx.fillText(text,40-(text.length*6),ph);
        }
        }
        catch(e){ alert(e); }
      };
      ta.onscroll     = function(ev){ this.paintLineNumbers(); };
      ta.onmousedown  = function(ev){ this.mouseisdown = true; }
      ta.onmouseup    = function(ev){ this.mouseisdown=false; this.paintLineNumbers(); };
      ta.onmousemove  = function(ev){ if (this.mouseisdown) this.paintLineNumbers(); };

	document.body.appendChild(div);
    // make sure it's painted
	ta.paintLineNumbers();
    return ta;
};
var ta = TextAreaLineNumbersWithCanvas();
//aqui escribe en el editor de texto
	//ta.value = TextAreaLineNumbersWithCanvas.toString();
function escribir() 
{ 
const input = document.getElementById('file');
const editor = document.getElementById('area');
  if (input.files.length > 0) {
    readFile(input.files[0]);
  }
function readFile(file) {
  const reader = new FileReader();
  reader.onload = function() {
    editor.value= reader.result; 
    //editor.value='aaaaaa';
  }
  reader.readAsText(file);
}
};
</script>
  <script>
    /**
    * Exportar
    **/
    function exportar (data, fileName) {
      const a = document.createElement("a");
      const contenido = data,
          blob = new Blob([contenido], {type: "octet/stream"}),
          url = window.URL.createObjectURL(blob);
      a.href = url;
      a.download = fileName;
      a.click();
      window.URL.revokeObjectURL(url);
      
    };
    
    window.onload = function(){
    // CODIGO 3 DIRECCIONES
    // CODIGO 3 DIRECCIONES
    document.querySelector('#exportar3D').onclick = function () {
      console.log('PRESIONA BOTON');
      const data = document.querySelector('#area').value;
      const nombreArchivo = 'Codigo_3Direcciones.cpp'
      exportar(data, nombreArchivo);
    }
    // CODIGO Optimizado.cpp
    // CODIGO OPTIMIZADO.cpp
    document.querySelector('#exportarOptimizado').onclick = function () {
      console.log('PRESIONA BOTON');
      const data = document.querySelector('#area').value;
      const nombreArchivo = 'Codigo_3Direcciones.cpp'
      exportar(data, nombreArchivo);
    }
    // CODIGO Assembler.asm
    // CODIGO Assembler.asm
    document.querySelector('#exportarAssembler').onclick = function () {
      console.log('PRESIONA BOTON');
      const data = document.querySelector('#area').value;
      const nombreArchivo = 'Codigo_Assembler.asm'
      exportar(data, nombreArchivo);
    }


    }


    </script>

<div class="container profile profile-view" id="profile">
    <div class="row">
        <div class="col-md-12 alert-col relative">
            <div class="input-group"  >
              <br>
              <div class="custom-file"  >
                <input type="file"  id="file" name="file">
                <label class="custom-file-label" for="file">Busca un archivo</label>
              </div>
              <div class="input-group-append">
                <button type="button" onclick="escribir()" class="btn btn-info">Leer archivo</button>
              </div>
              <button type="button" onclick="compilar2('aaaaaaayy
              ')" class="btn btn-success">Compilar Gramatica</button>

              <br>
            </div>
        </div>
</div>

<div class="row">
    <div class="col-md-12 alert-col relative">
    </div>
</div>
</div>
<div>
    <h2 ALIGN="center" >RESPUESTAS DEL ANALIZADOR</h2>
    <div class="container profile profile-view" id="profile">
    <div class="form-group">
        <textarea class="form-control" id="respuesta" name="respuesta" rows="9"></textarea>
    </div>
</div>
</div>

</body>
</html>